<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Thai Ethical Hacking Labs ‚Äî Log Analysis Challenge</title>
<style>
  :root{
    --bg:#0b1020; --panel:#121a2c; --fg:#eaf0efff; --muted:#8ea4ca;
    --card:#0f1628; --line:#1f2b47; --accent:#4ad395; --warn:#ffcc66; --bad:#ff6b6b;
    --code:#0a1122; --chip:#1b2440;
  }
  .hidden{display:none}
  .code-sample{margin-top:8px;background:#061226;padding:8px;border-radius:6px;color:#bfe7d3;overflow:auto;font-family:ui-monospace,monospace}
  *{box-sizing:border-box}
  body{margin:0; font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI","Noto Sans Thai","Noto Sans",Arial,sans-serif;
    background:linear-gradient(180deg,#080d18,var(--bg)); color:var(--fg);}
  header{position:sticky; top:0; background:var(--panel); border-bottom:1px solid var(--line); padding:12px 0; z-index:10}
  .wrap{max-width:900px; margin:0 auto; padding:0 16px}
  h1{margin:0; font-size:1.4rem}
  .sub{color:var(--muted); font-size:.95rem; margin-top:4px}
  main .wrap{padding:24px 0}
  .card{background:linear-gradient(180deg,rgba(74,211,149,0.06),transparent 25%),var(--card);
    border:1px solid var(--line); border-radius:12px; padding:16px; margin-bottom:24px}
  label{display:block; margin:12px 0 4px; font-weight:600}
  select,input[type="number"],input[type="text"],button,textarea{width:100%; padding:8px; font-size:1rem;
    background:#0d1426; border:1px solid #243154; border-radius:8px; color:var(--fg);}
  textarea{resize:vertical; min-height:100px}
  .btn{background:linear-gradient(180deg,#2a7fff,#1663e6); border:none; color:#fff;
    padding:10px; font-weight:700; cursor:pointer; margin-top:12px}
  .btn.disabled{opacity:.5; cursor:not-allowed}
  .log{background:var(--code); border:1px solid var(--line); border-radius:8px;
    padding:12px; font-family:ui-monospace,monospace; line-height:1.4; overflow:auto; max-height:200px}
  .hint{color:var(--muted); margin-top:8px}
  .kpi{display:flex; gap:12px; margin-top:16px}
  .kpi .card{flex:1; background:#0f1a32; border:1px solid #263c70; border-radius:8px; padding:12px; text-align:center}
  .kpi h3{margin:0; font-size:.9rem; color:#c9d7f7}
  .num{font-size:1.4rem; font-weight:700; margin-top:4px}
  .score{color:var(--accent)}
  .sep{height:1px; background:var(--line); margin:16px 0}
  .unlocked{background:var(--ok); color:#0b1020; padding:12px; border-radius:8px; text-align:center; margin-top:16px}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Log Analysis Challenge</h1>
  <div class="sub">‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ô‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡πÅ‡∏Æ‡πá‡∏Å ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° ‚Äî ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏™‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</div>
  </div>
</header>

<main>
  <div class="wrap">

    <section class="card">
      <h2>Step 1: ‡∏î‡∏π‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™</h2>
      <div class="log" id="encodedLog">
VGhpcyBpcyBhIHNlY3JldCBsb2cgbWVzc2FnZSBzZWdtZW50ZWQgd2l0aCBWMSBmaXJzdCwg
dGhlbiBjYXVzZWVyIHNoaWZ0IGJ5IDA4IGFuZCBhcHBseSBWMSBkZWNyeXB0aW9uLi4u
      </div>
  <div class="hint">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≠‡∏á‡∏Ç‡∏±‡πâ‡∏ô ‚Äî ‡πÉ‡∏´‡πâ‡∏°‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏°‡∏¥‡πà‡∏á: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™ ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠</div>
    </section>

    <section class="card">
      <h2>Step 2: ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏î‡πâ‡∏ß‡∏¢ Caesar Cipher</h2>
      <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Shift (0‚Äì25)</label>
  <input type="number" id="caesarShift" value="8" min="0" max="25" placeholder="0-25" title="Shift value (0-25)" />
  <button id="btnCaesar" class="btn">Decrypt Caesar</button>
  <textarea id="afterCaesar" readonly placeholder="‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏´‡∏•‡∏±‡∏á‡∏ñ‡∏≠‡∏î Caesar"></textarea>
  <div class="hint">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå (‡πÄ‡∏ä‡πà‡∏ô JavaScript/Python) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏•‡∏≠‡∏á shift ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‚Äî ‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  <pre class="code-sample"><code>// JavaScript: brute-force Caesar
for(let s=0;s<26;s++){ let out=''; for(const c of atob(raw).replace(/\s+/g,'')){ const code=c.charCodeAt(0); if(code>=65&&code<=90) out+=String.fromCharCode((code-65-s+26)%26+65); else if(code>=97&&code<=122) out+=String.fromCharCode((code-97-s+26)%26+97); else out+=c;} console.log(s,out); }</code></pre>
  </div>
    </section>

    <section class="card">
      <h2>Step 3: ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏î‡πâ‡∏ß‡∏¢ Vigen√®re Cipher</h2>
      <label>‡πÉ‡∏™‡πà Keyword</label>
      <input type="text" id="vigenereKey" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå keyword"/>
  <button id="btnVigenere" class="btn">Decrypt Vigen√®re</button>
  <textarea id="finalPlain" readonly placeholder="‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢"></textarea>
    <div class="hint">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö keyword ‡∏´‡∏•‡∏≤‡∏¢ ‡πÜ ‡∏Ñ‡πà‡∏≤ ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏ä‡∏¥‡∏á‡∏ï‡∏£‡∏£‡∏Å‡∏∞ ‚Äî ‡∏™‡∏¥‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏ó‡∏±‡πâ‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
  <pre class="code-sample"><code># Python: try multiple keys (simple example)
def decrypt_vig(text,key):
  out=''
  j=0
  for c in text:
    if c.isalpha():
      base=ord('A') if c.isupper() else ord('a')
      ks=ord(key[j%len(key)].upper())-65
      out+=chr((ord(c)-base-ks)%26+base)
      j+=1
    else:
      out+=c
  return out

for k in ['key','test','secret']:
  print(k, decrypt_vig(sample, k))</code></pre>
    </div>
    </section>

    <section class="card">
      <h2>Step 4: ‡∏õ‡πâ‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ</h2>
      <label>‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ (unlock code)</label>
      <input type="text" id="unlockInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"/>
      <button id="btnUnlock" class="btn disabled">Unlock Lesson</button>
      <div id="unlockMsg" class="hint"></div>
    </section>

  <section class="card hidden" id="finalChallengeCard">
      <h2>Step 5: Final Challenge ‚Äî ‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ 1‚Äì2</h2>
      <p class="hint">‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Step 3 (‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå Vigen√®re) ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤ shift ‡∏à‡∏≤‡∏Å Step 2 ‡∏°‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤:</p>
      <ol class="hint">
        <li>‡πÄ‡∏≠‡∏≤‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 1 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà 1</li>
        <li>‡πÄ‡∏≠‡∏≤‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 2 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà 2</li>
        <li>‡πÄ‡∏≠‡∏≤‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 3 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà 3</li>
        <li>‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç shift ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Caesar (‡πÄ‡∏ä‡πà‡∏ô 8)</li>
      </ol>
      <label>‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (final unlock)</label>
      <input type="text" id="finalChallengeInput" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤"/>
      <button id="btnFinalChallenge" class="btn disabled">Unlock Final Lesson</button>
      <div id="finalMsg" class="hint"></div>
    </section>

    <div class="kpi">
      <div class="card"><h3>Attempts</h3><div id="kAttempts" class="num">0</div></div>
      <div class="card"><h3>Progress</h3><div id="kProgress" class="num">0%</div></div>
      <div class="card"><h3>Score</h3><div id="kScore" class="num score">0</div></div>
    </div>

      <div id="unlockedBanner" class="unlocked hidden">
        üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ñ‡∏π‡∏Å‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß ‚Äî ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ù‡∏∂‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
      </div>

  </div>
</main>

<script>
(function(){
  const encLog = document.getElementById('encodedLog').textContent.trim();
  const caesarShift = document.getElementById('caesarShift');
  const vigenereKey = document.getElementById('vigenereKey');
  const afterCaesar = document.getElementById('afterCaesar');
  const finalPlain = document.getElementById('finalPlain');
  const unlockInput = document.getElementById('unlockInput');
  const btnCaesar = document.getElementById('btnCaesar');
  const btnVigenere = document.getElementById('btnVigenere');
  const btnUnlock = document.getElementById('btnUnlock');
  const unlockMsg = document.getElementById('unlockMsg');
  const kAttempts = document.getElementById('kAttempts');
  const kProgress = document.getElementById('kProgress');
  const kScore = document.getElementById('kScore');
  const unlockedBanner = document.getElementById('unlockedBanner');

  let attempts = 0;
  let progress = 0;
  const maxScore = 40; // 10 per step
  let score = 0;
  let stage = 0; // 0‚Üíafter Caesar, 1‚Üíafter Vigen√®re

  // Utility: Base64 decode
  function b64decode(str){
    try { return atob(str.replace(/\\s+/g,'')); }
    catch(e){ return ''; }
  }

  // Caesar decrypt
  function decryptCaesar(text, shift){
    return [...text].map(c=>{
      const code=c.charCodeAt(0);
      if(code>=65 && code<=90)
        return String.fromCharCode((code-65-shift+26)%26+65);
      if(code>=97 && code<=122)
        return String.fromCharCode((code-97-shift+26)%26+97);
      return c;
    }).join('');
  }

  // Vigen√®re decrypt
  function decryptVigenere(text, key){
    let j=0;
    return [...text].map(c=>{
      const code=c.charCodeAt(0);
      if(/[A-Za-z]/.test(c)){
        const base = code<91?65:97;
        const ks = key[j%key.length].toUpperCase().charCodeAt(0)-65;
        j++;
        return String.fromCharCode((code-base-ks+26)%26+base);
      }
      return c;
    }).join('');
  }

  function updateKPIs(){
    kAttempts.textContent = attempts;
    kProgress.textContent = `${progress}%`;
    kScore.textContent = score;
  }

  btnCaesar.addEventListener('click', ()=>{
    attempts++; progress = Math.max(progress, 33);
    const shift = Number(caesarShift.value);
    const decoded = b64decode(encLog);
    const step1 = decryptCaesar(decoded, shift);
    afterCaesar.value = step1;
    score += 10;
    stage = 1;
    updateKPIs();
  });

  btnVigenere.addEventListener('click', ()=>{
    if(stage<1) return alert('‡∏ñ‡∏≠‡∏î Caesar ‡∏Å‡πà‡∏≠‡∏ô');
    attempts++; progress = Math.max(progress, 66);
    const key = vigenereKey.value.trim();
    const step1 = afterCaesar.value;
    const finalText = decryptVigenere(step1, key);
    finalPlain.value = finalText;
    score += 10;
    stage = 2;
    updateKPIs();
    btnUnlock.classList.remove('disabled');
  });

  btnUnlock.addEventListener('click', ()=>{
    if(stage<2) return;
    attempts++;
    updateKPIs();
    const answer = unlockInput.value.trim().toLowerCase();
    // expected unlock code from plaintext: first word of log
    const expected = finalPlain.value.trim().split(/\\s+/)[0].toLowerCase();
    if(answer === expected){
      progress = 75; score += 10; // partial unlock: reveal final challenge
      updateKPIs();
      // reveal next step (final challenge)
      document.getElementById('finalChallengeCard').style.display = 'block';
      unlockMsg.textContent = '‚úî ‡∏£‡∏´‡∏±‡∏™‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚Äî ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤ shift ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢';
      // enable final challenge button
      const btnFinal = document.getElementById('btnFinalChallenge');
      btnFinal.classList.remove('disabled');
      btnFinal.disabled = false;
    } else {
      unlockMsg.textContent = '‚úñ ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà';
    }
  });

  // Final challenge logic
  const btnFinalChallenge = document.getElementById('btnFinalChallenge');
  const finalChallengeInput = document.getElementById('finalChallengeInput');
  const finalMsg = document.getElementById('finalMsg');

  btnFinalChallenge.addEventListener('click', ()=>{
    // require previous steps
    if(stage<2) return alert('‡∏ó‡∏≥‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
    // build expected code: char1 of word1 + char2 of word2 + char3 of word3 + caesarShift
    const text = finalPlain.value.trim();
    const words = text.split(/\s+/);
    if(words.length < 3){ finalMsg.textContent = '‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤'; return; }
    const c1 = (words[0].length >= 1)? words[0][0] : '';
    const c2 = (words[1].length >= 2)? words[1][1] : '';
    const c3 = (words[2].length >= 3)? words[2][2] : '';
    const shiftNum = String(Number(caesarShift.value));
    const expectedFinal = (c1+c2+c3+shiftNum).toLowerCase();

    const provided = finalChallengeInput.value.trim().toLowerCase();
    attempts++;
    if(provided === expectedFinal){
      progress = 100; score += 10; updateKPIs();
      unlockedBanner.style.display = 'block';
      unlockedBanner.textContent = 'üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡πâ‡∏ß!';
      finalMsg.textContent = '‚úî ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
      btnFinalChallenge.classList.add('disabled'); btnFinalChallenge.disabled = true;
    } else {
      finalMsg.textContent = '‚úñ ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
    }
    updateKPIs();
  });

  // Initialize
  updateKPIs();
})();
</script>
</body>
</html>
